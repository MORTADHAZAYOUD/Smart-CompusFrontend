<div class="session-management">
  <!-- Page Header -->
  <div class="page-header">
    <div class="header-content">
      <h1>Gestion des SÃ©ances</h1>
      <p>Organisez et gÃ©rez vos cours et sÃ©ances d'enseignement</p>
    </div>
    <button class="create-btn" (click)="openCreateModal()">
      <span class="btn-icon">â•</span>
      Nouvelle SÃ©ance
    </button>
  </div>

  <!-- Filters and Search -->
  <div class="controls-section">
    <div class="search-container">
      <input type="text" 
             placeholder="Rechercher par matiÃ¨re, classe ou salle..." 
             [(ngModel)]="searchTerm"
             (input)="onSearchChange()"
             class="search-input">
      <span class="search-icon">ğŸ”</span>
    </div>
    
    <div class="filter-container">
      <select [(ngModel)]="filterStatus" (change)="onFilterChange()" class="filter-select">
        <option value="all">Tous les statuts</option>
        <option value="scheduled">ProgrammÃ©es</option>
        <option value="ongoing">En cours</option>
        <option value="completed">TerminÃ©es</option>
        <option value="cancelled">AnnulÃ©es</option>
      </select>
    </div>
  </div>

  <!-- Sessions Grid -->
  <div class="sessions-grid">
    <div class="session-card" 
         *ngFor="let session of filteredSessions"
         [class]="'status-' + session.status">
      
      <div class="session-header">
        <div class="session-info">
          <h3>{{session.subject}}</h3>
          <span class="class-name">{{session.class}}</span>
        </div>
        <div class="session-status" [class]="'status-' + getStatusColor(session.status)">
          <span class="status-icon">{{getStatusIcon(session.status)}}</span>
          <span class="status-text">{{session.status | titlecase}}</span>
        </div>
      </div>
      
      <div class="session-details">
        <div class="detail-item">
          <span class="detail-icon">ğŸ“…</span>
          <span>{{session.date | date:'dd/MM/yyyy'}}</span>
        </div>
        <div class="detail-item">
          <span class="detail-icon">â°</span>
          <span>{{session.startTime}} - {{session.endTime}}</span>
        </div>
        <div class="detail-item">
          <span class="detail-icon">ğŸ“</span>
          <span>{{session.room}}</span>
        </div>
        <div class="detail-item">
          <span class="detail-icon">ğŸ‘¥</span>
          <span>{{session.studentsCount}} Ã©tudiants</span>
        </div>
      </div>
      
      <div class="session-progress">
        <div class="progress-item" [class.completed]="session.attendanceMarked">
          <span class="progress-icon">{{session.attendanceMarked ? 'âœ…' : 'â³'}}</span>
          <span>PrÃ©sences</span>
        </div>
        <div class="progress-item" [class.completed]="session.gradesAssigned">
          <span class="progress-icon">{{session.gradesAssigned ? 'âœ…' : 'â³'}}</span>
          <span>Notes</span>
        </div>
      </div>
      
      <div class="session-actions">
        <button *ngIf="session.status === 'scheduled'" 
                class="action-btn primary"
                (click)="startSession(session)">
          <span class="btn-icon">â–¶ï¸</span>
          DÃ©marrer
        </button>
        
        <button *ngIf="session.status === 'ongoing'" 
                class="action-btn success"
                (click)="endSession(session)">
          <span class="btn-icon">â¹ï¸</span>
          Terminer
        </button>
        
        <button *ngIf="session.status === 'ongoing' || session.status === 'completed'" 
                class="action-btn secondary"
                (click)="markAttendance(session)">
          <span class="btn-icon">âœ…</span>
          PrÃ©sences
        </button>
        
        <button *ngIf="session.status === 'completed'" 
                class="action-btn warning"
                (click)="assignGrades(session)">
          <span class="btn-icon">ğŸ¯</span>
          Notes
        </button>
        
        <div class="more-actions">
          <button class="action-btn ghost" (click)="editSession(session)">
            <span class="btn-icon">âœï¸</span>
          </button>
          <button class="action-btn ghost danger" (click)="deleteSession(session)">
            <span class="btn-icon">ğŸ—‘ï¸</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Empty State -->
  <div class="empty-state" *ngIf="filteredSessions.length === 0">
    <div class="empty-icon">ğŸ“š</div>
    <h3>Aucune sÃ©ance trouvÃ©e</h3>
    <p>Commencez par crÃ©er votre premiÃ¨re sÃ©ance d'enseignement</p>
    <button class="create-btn" (click)="openCreateModal()">
      <span class="btn-icon">â•</span>
      CrÃ©er une sÃ©ance
    </button>
  </div>
</div>

<!-- Create Session Modal -->
<div class="modal-overlay" *ngIf="showCreateModal" (click)="closeCreateModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>CrÃ©er une nouvelle sÃ©ance</h2>
      <button class="close-btn" (click)="closeCreateModal()">âœ•</button>
    </div>
    
    <form class="session-form" (ngSubmit)="createSession()">
      <div class="form-row">
        <div class="form-group">
          <label>MatiÃ¨re</label>
          <input type="text" [(ngModel)]="newSession.subject" name="subject" required>
        </div>
        <div class="form-group">
          <label>Classe</label>
          <input type="text" [(ngModel)]="newSession.class" name="class" required>
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label>Date</label>
          <input type="date" [(ngModel)]="newSession.date" name="date" required>
        </div>
        <div class="form-group">
          <label>Salle</label>
          <input type="text" [(ngModel)]="newSession.room" name="room" required>
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label>Heure de dÃ©but</label>
          <input type="time" [(ngModel)]="newSession.startTime" name="startTime" required>
        </div>
        <div class="form-group">
          <label>Heure de fin</label>
          <input type="time" [(ngModel)]="newSession.endTime" name="endTime" required>
        </div>
      </div>
      
      <div class="form-group">
        <label>Nombre d'Ã©tudiants</label>
        <input type="number" [(ngModel)]="newSession.studentsCount" name="studentsCount" min="1" required>
      </div>
      
      <div class="modal-actions">
        <button type="button" class="btn secondary" (click)="closeCreateModal()">Annuler</button>
        <button type="submit" class="btn primary" [disabled]="!isValidSession()">CrÃ©er la sÃ©ance</button>
      </div>
    </form>
  </div>
</div>